<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#6366f1">
    <meta name="description" content="Android端末でバイブレーションを制御するPWAアプリ">
    <title>Vibration Toolbox</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="icon-192.png">
</head>
<body>
    <div class="container">
        <header>
            <h1>📳 Vibration Toolbox</h1>
            <p class="subtitle">Android端末のバイブレーションをコントロール</p>
        </header>

        <main>
            <!-- サポート状況表示 -->
            <div id="support-status" class="status-card">
                <div class="status-icon">⏳</div>
                <p id="status-text">チェック中...</p>
            </div>

            <!-- お気に入りプリセット -->
            <section class="section" id="favorites-section" style="display: none;">
                <h2>⭐ お気に入りパターン</h2>
                <div id="favorites-grid" class="button-grid"></div>
            </section>

            <!-- プリセットパターン -->
            <section class="section">
                <h2>プリセットパターン</h2>
                <div class="button-grid">
                    <button class="vibrate-btn" data-pattern="short">
                        <span class="btn-icon">📱</span>
                        <span class="btn-text">短い振動</span>
                        <span class="btn-desc">100ms</span>
                    </button>
                    <button class="vibrate-btn" data-pattern="medium">
                        <span class="btn-icon">📳</span>
                        <span class="btn-text">中程度の振動</span>
                        <span class="btn-desc">200ms</span>
                    </button>
                    <button class="vibrate-btn" data-pattern="long">
                        <span class="btn-icon">📲</span>
                        <span class="btn-text">長い振動</span>
                        <span class="btn-desc">500ms</span>
                    </button>
                    <button class="vibrate-btn" data-pattern="double">
                        <span class="btn-icon">🔄</span>
                        <span class="btn-text">ダブルタップ</span>
                        <span class="btn-desc">100ms × 2</span>
                    </button>
                    <button class="vibrate-btn" data-pattern="triple">
                        <span class="btn-icon">🔃</span>
                        <span class="btn-text">トリプルタップ</span>
                        <span class="btn-desc">100ms × 3</span>
                    </button>
                    <button class="vibrate-btn" data-pattern="pulse">
                        <span class="btn-icon">💓</span>
                        <span class="btn-text">パルス</span>
                        <span class="btn-desc">リズミカル</span>
                    </button>
                    <button class="vibrate-btn" data-pattern="sos">
                        <span class="btn-icon">🆘</span>
                        <span class="btn-text">SOS</span>
                        <span class="btn-desc">... --- ...</span>
                    </button>
                    <button class="vibrate-btn" data-pattern="alarm">
                        <span class="btn-icon">⏰</span>
                        <span class="btn-text">アラーム</span>
                        <span class="btn-desc">強い振動</span>
                    </button>
                    <button class="vibrate-btn" data-pattern="ringtone">
                        <span class="btn-icon">📞</span>
                        <span class="btn-text">着信音</span>
                        <span class="btn-desc">長-短-短-長</span>
                    </button>
                    <button class="vibrate-btn" data-pattern="heartbeat">
                        <span class="btn-icon">💗</span>
                        <span class="btn-text">ハートビート</span>
                        <span class="btn-desc">心拍リズム</span>
                    </button>
                    <button class="vibrate-btn" data-pattern="emergency">
                        <span class="btn-icon">🚨</span>
                        <span class="btn-text">緊急アラート</span>
                        <span class="btn-desc">強弱繰り返し</span>
                    </button>
                    <button class="vibrate-btn" data-pattern="notification">
                        <span class="btn-icon">💬</span>
                        <span class="btn-text">通知</span>
                        <span class="btn-desc">軽いタップ</span>
                    </button>
                </div>
            </section>

            <!-- リピート/ループ設定 -->
            <section class="section">
                <h2>⚙️ リピート/ループ設定</h2>
                <p class="help-text">すべての振動パターンに適用されます</p>
                <div class="repeat-controls">
                    <div class="toggle-container">
                        <label class="toggle-label">
                            <input type="checkbox" id="repeat-enabled">
                            <span class="toggle-text">リピート機能を有効化</span>
                        </label>
                    </div>

                    <div id="repeat-options" class="repeat-options" style="display: none;">
                        <div class="custom-control">
                            <label for="repeat-count">繰り返し回数</label>
                            <select id="repeat-count" class="repeat-select">
                                <option value="2">2回</option>
                                <option value="3">3回</option>
                                <option value="4">4回</option>
                                <option value="5" selected>5回</option>
                                <option value="6">6回</option>
                                <option value="7">7回</option>
                                <option value="8">8回</option>
                                <option value="9">9回</option>
                                <option value="10">10回</option>
                                <option value="infinite">無限ループ ♾️</option>
                            </select>
                        </div>

                        <div class="custom-control">
                            <label for="repeat-interval">ループ間隔（ミリ秒）</label>
                            <div class="slider-container">
                                <input type="range" id="repeat-interval" min="0" max="2000" value="500" step="100">
                                <span id="interval-value">500ms</span>
                            </div>
                        </div>

                        <div id="repeat-status" class="repeat-status" style="display: none;">
                            <div class="status-indicator">
                                <span class="status-dot"></span>
                                <span id="repeat-status-text">実行中...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 停止ボタン -->
            <section class="section">
                <button id="stop-vibrate" class="stop-btn">
                    <span class="btn-icon">⏹️</span>
                    <span class="btn-text">振動を停止</span>
                </button>
            </section>

            <!-- カスタムパターン -->
            <section class="section">
                <h2>カスタム設定</h2>
                <div class="custom-control">
                    <label for="duration">振動時間（ミリ秒）</label>
                    <div class="slider-container">
                        <input type="range" id="duration" min="10" max="1000" value="200" step="10">
                        <span id="duration-value">200ms</span>
                    </div>
                </div>
                <button id="custom-vibrate" class="vibrate-btn primary full-width">
                    <span class="btn-icon">⚡</span>
                    <span class="btn-text">カスタム振動を実行</span>
                </button>
            </section>

            <!-- パターンエディタ -->
            <section class="section">
                <h2>パターンエディタ</h2>
                <p class="help-text">カンマ区切りで振動と休止のパターンを入力（例: 100,50,100,50,200）</p>
                <div class="pattern-editor">
                    <input type="text" id="pattern-input" placeholder="100,50,100,50,200" value="100,50,100,50,200">

                    <!-- パターンビジュアライザー -->
                    <div id="pattern-visualizer" class="pattern-visualizer">
                        <div class="visualizer-timeline"></div>
                        <div class="visualizer-info">
                            <span id="total-duration">総時間: 400ms</span>
                        </div>
                    </div>

                    <div class="pattern-actions">
                        <button id="pattern-vibrate" class="vibrate-btn primary full-width">
                            <span class="btn-icon">🎵</span>
                            <span class="btn-text">パターンを実行</span>
                        </button>
                        <button id="save-pattern" class="save-pattern-btn full-width">
                            <span class="btn-icon">💾</span>
                            <span class="btn-text">パターンを保存</span>
                        </button>
                    </div>
                </div>
            </section>

            <!-- パターンライブラリ -->
            <section class="section" id="library-section" style="display: none;">
                <h2>保存済みパターン</h2>
                <div id="saved-patterns" class="saved-patterns"></div>
            </section>

            <!-- 共有機能 -->
            <section class="section">
                <h2>パターンを共有</h2>
                <p class="help-text">現在の設定をURLとして共有できます</p>
                <button id="share-btn" class="share-btn">
                    <span class="btn-icon">🔗</span>
                    <span class="btn-text">URLをコピー</span>
                </button>
                <div id="share-status" class="share-status" style="display: none;">
                    <span class="success-icon">✅</span>
                    <span>URLをコピーしました！</span>
                </div>
            </section>

            <!-- インストールボタン（PWA） -->
            <div id="install-container" class="install-container" style="display: none;">
                <button id="install-btn" class="install-btn">
                    <span class="btn-icon">📥</span>
                    <span class="btn-text">アプリをインストール</span>
                </button>
            </div>
        </main>

        <footer>
            <p class="footer-text">
                <strong>Vibration Toolbox</strong> |
                <a href="https://github.com/temeteke/vibration-toolbox" target="_blank" rel="noopener noreferrer" class="footer-link">GitHub</a>
            </p>
        </footer>
    </div>

    <script src="app.js"></script>
</body>
</html>
